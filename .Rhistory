geom_line(aes(x = pred, y = smooth_pseudos$fit), color = "darkblue") +
geom_abline(slope = 1, intercept = 0, color = "black", linetype = 2) +
scale_x_continuous("Estimated risk at 1 year", expand = c(0, 0)) +
scale_y_continuous(paste0("Observed outcome proportions at 1 year"), expand = c(0, 0)) +
geom_ribbon(data = density_data, aes(x = x, ymin = y, ymax = lim), alpha = 0.3, show.legend = FALSE) + # Fill the area above the line
geom_line(data = density_data, aes(x = x, y = y)) +
theme_bw() +
theme(aspect.ratio = 1) +
coord_cartesian(xlim = c(-0.001, lim), ylim = c(-0.001, lim))
print(fig)
fig <- ggplot() +
geom_ribbon(aes(x = pred, y = obs, ymin = CI_lower, ymax = CI_upper), alpha = 0.3, color = "darkblue") +
geom_line(aes(x = pred, y = smooth_pseudos$fit), color = "darkblue") +
geom_abline(slope = 1, intercept = 0, color = "black", linetype = 2) +
scale_x_continuous("Estimated risk at 1 year", expand = c(0, 0)) +
scale_y_continuous(paste0("Observed outcome proportions at 1 year"), expand = c(0, 0)) +
geom_ribbon(data = density_data, aes(x = x, ymin = y, ymax = lim), alpha = 0.3, show.legend = FALSE) +
geom_line(data = density_data, aes(x = x, y = y)) +
theme_bw() +
theme(aspect.ratio = 1) +
coord_cartesian(xlim = c(-0.001, lim), ylim = c(-0.001, lim))
print(fig)
fig <- ggplot() +
geom_ribbon(aes(x = pred, y = obs, ymin = CI_lower, ymax = CI_upper), alpha = 0.3, color = "darkblue") +
geom_line(aes(x = pred, y = smooth_pseudos$fit), color = "darkblue") +
geom_abline(slope = 1, intercept = 0, color = "black", linetype = 2) +
scale_x_continuous("Estimated risk at 1 year", expand = c(0, 0)) +
scale_y_continuous(paste0("Observed outcome proportions at 1 year"), expand = c(0, 0)) +
geom_ribbon(data = density_data, aes(x = x, ymin = y, ymax = lim), alpha = 0.3, show.legend = FALSE) +
geom_line(data = density_data, aes(x = x, y = y)) +
theme_bw() +
theme(aspect.ratio = 1) +
coord_cartesian(xlim = c(-0.001, lim), ylim = c(-0.001, lim))
print(fig)
fig <- ggplot() +
geom_ribbon(aes(x = pred, y = obs, ymin = CI_lower, ymax = CI_upper), alpha = 0.3, color = "darkblue") +
geom_line(aes(x = pred, y = smooth_pseudos$fit), color = "darkblue") +
geom_abline(slope = 1, intercept = 0, color = "black", linetype = 2) +
geom_ribbon(data = density_data, aes(x = x, ymin = y, ymax = lim), alpha = 0.3, show.legend = FALSE) +
geom_line(data = density_data, aes(x = x, y = y)) +
scale_x_continuous("Estimated risk at 1 year", expand = c(0, 0)) +
scale_y_continuous(paste0("Observed outcome proportions at 1 year"), expand = c(0, 0)) +
coord_cartesian(xlim = c(-0.001, lim), ylim = c(-0.001, lim)) +
theme_bw() +
theme(aspect.ratio = 1)
print(fig)
fig <- ggplot() +
geom_ribbon(aes(x = pred, y = obs, ymin = CI_lower, ymax = CI_upper), alpha = 0.3, color = "darkblue") +
geom_line(aes(x = pred, y = smooth_pseudos$fit), color = "darkblue") +
geom_abline(slope = 1, intercept = 0, color = "black", linetype = 2) +
geom_ribbon(data = density_data, aes(x = x, ymin = y, ymax = lim), alpha = 0.3, show.legend = FALSE) +
geom_line(data = density_data, aes(x = x, y = y)) +
scale_x_continuous("Estimated risk at 1 year", expand = c(0, 0)) +
scale_y_continuous(paste0("Observed outcome proportions at 1 year"), expand = c(0, 0)) +
coord_cartesian(xlim = c(-0.001, lim), ylim = c(-0.001, lim)) +
#theme_bw() +
theme(aspect.ratio = 1)
print(fig)
fig <- ggplot() +
geom_ribbon(aes(x = pred, y = obs, ymin = CI_lower, ymax = CI_upper, color = "darkblue"), alpha = 0.3) +
geom_line(aes(x = pred, y = smooth_pseudos$fit), color = "darkblue") +
geom_abline(slope = 1, intercept = 0, color = "black", linetype = 2) +
geom_ribbon(data = density_data, aes(x = x, ymin = y, ymax = lim), alpha = 0.3, show.legend = FALSE) +
geom_line(data = density_data, aes(x = x, y = y)) +
scale_x_continuous("Estimated risk at 1 year", expand = c(0, 0)) +
scale_y_continuous(paste0("Observed outcome proportions at 1 year"), expand = c(0, 0)) +
coord_cartesian(xlim = c(-0.001, lim), ylim = c(-0.001, lim)) +
theme_bw() +
theme(aspect.ratio = 1)
print(fig)
fig <- ggplot() +
geom_ribbon(aes(x = pred, y = obs, ymin = CI_lower, ymax = CI_upper), alpha = 0.3, fill = "darkblue") +
geom_line(aes(x = pred, y = smooth_pseudos$fit), color = "darkblue") +
geom_abline(slope = 1, intercept = 0, color = "black", linetype = 2) +
geom_ribbon(data = density_data, aes(x = x, ymin = y, ymax = lim), alpha = 0.3, show.legend = FALSE) +
geom_line(data = density_data, aes(x = x, y = y)) +
scale_x_continuous("Estimated risk at 1 year", expand = c(0, 0)) +
scale_y_continuous(paste0("Observed outcome proportions at 1 year"), expand = c(0, 0)) +
coord_cartesian(xlim = c(-0.001, lim), ylim = c(-0.001, lim)) +
theme_bw() +
theme(aspect.ratio = 1)
print(fig)
library(tableone)
tab1 <- CreateTableOne(vars = c("age",
"sex_f",
